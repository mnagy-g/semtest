name: release
on:
  push:
    branches:
      - master

permissions:
  id-token: write
  contents: write

jobs:
  get:
    name: Get Release
    runs-on: ubuntu-latest

#    outputs:
#      TAG_STATUS: ${{ steps.tag-commit.outputs.TAG_STATUS }}
#      SEM_NEXT_VERSION: ${{ steps.tag-commit.outputs.SEM_NEXT_VERSION }}
#      SEM_LAST_VERSION: ${{ steps.tag-commit.outputs.SEM_LAST_VERSION }}

    steps:
      - name: Get latest release
        id: get-release
        uses: actions/github-script@v6
        with:
          script: |
            const { data: release } = await github.rest.repos.getLatestRelease({
              owner: context.repo.owner,
              repo: context.repo.repo,
              sort: 'published_at' 
            })
            
            console.log(release)
            
            core.setOutput('RELEASE_ID', release.id)
            core.setOutput('RELEASE_TAG', release.tag_name)

      - name: Get result
        run: echo "${{steps.get-release.outputs.result}}"

      - name: Get result
        run: |
          echo "${{steps.get-release.outputs.RELEASE_ID}}"
          echo "${{steps.get-release.outputs.RELEASE_TAG}}"
